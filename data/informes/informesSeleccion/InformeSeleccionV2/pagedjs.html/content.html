<script>
    (function () {
        // Trigger para chrome-pdf si tienes “wait for printing trigger”
        function done(){ window.JSREPORT_READY_TO_START = true; }

        if (!window.Paged) { setTimeout(done, 0); return; }

        class GMPHandler extends window.Paged.Handler {
            onFragment (fragment) {
                if (fragment && fragment.after && fragment.after.node) {
                    var crumb = fragment.node.getAttribute('data-breadcrumb');
                    if (crumb) {
                        fragment.after.node.setAttribute('data-breadcrumb', crumb);
                    }
                    fragment.after.node.classList.add('continued');
                }
            }
        }

        window.Paged.registerHandlers(GMPHandler);
        document.addEventListener('pagedjs:rendered', done);
        setTimeout(done, 3000); // salvavidas
    })();
</script>
